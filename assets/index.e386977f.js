(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function a(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerpolicy&&(o.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?o.credentials="include":e.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(e){if(e.ep)return;e.ep=!0;const o=a(e);fetch(e.href,o)}})();const b="https://opendata-download-metobs.smhi.se/api/version/1.0/parameter/1/station/72420/period/latest-hour/data.json";async function k(){return fetch(b).then(t=>t.json()).then(t=>t).catch(t=>(console.error(t),null))}const $="https://opendata-download-metobs.smhi.se/api/version/1.0/parameter/4/station/72420/period/latest-hour/data.json";async function P(){return fetch($).then(t=>t.json()).then(t=>t).catch(t=>(console.error(t),null))}const j="https://opendata-download-metobs.smhi.se/api/version/1.0/parameter/1.json";async function A(){return fetch(j).then(t=>t.json()).then(t=>t).catch(t=>(console.error(t),null))}async function f(t,n,a){const s=`https://opendata-download-metobs.smhi.se/api/version/1.0/parameter/${a}/station/${t}/period/${n}/data.json`;return fetch(s).then(e=>e.json()).then(e=>e).catch(e=>(console.error(e),null))}const d=document.querySelector("#searchField"),u=document.querySelector("#searchDropdown"),g=document.querySelector("#dropdownStations"),v=document.querySelector("#suggestedStations"),p=document.querySelector("main"),m=document.querySelector("#temperatureNowContainer"),h=document.querySelector("#rainAmount"),L=document.querySelector("#windSpeed"),y=document.querySelector("#temperatureNow"),H=document.querySelector("#locality"),C=document.querySelector("#positionDoesNotExist"),M=document.querySelector("#myPosition");let r=[],l=[...r];async function x(){const t=await k(),n=await P();y.innerHTML=`<span>${t.value[0].value}</span>`,H.innerHTML=`<span>${t.station.name}</span>`,L.innerHTML=`<span>${n?.value[0].value}</span>`,h.innerHTML="<span> - </span>"}await x();function I(){d.value===""?(u.classList.remove("display-none"),g.classList.add("display-none")):(u.classList.add("display-none"),g.classList.remove("display-none"))}function T(t){t.stopPropagation(),u.classList.remove("display-none")}function O(){u.classList.add("display-none"),g.classList.add("display-none")}d?.addEventListener("input",I);d?.addEventListener("click",T);d?.addEventListener("focus",T);window.addEventListener("click",O);async function w(t){const n=l[t].key,a=l[t].name,s=await f(n,"latest-hour",1),e=await f(n,"latest-hour",4),o=await f(n,"latest-hour",7);y.innerHTML="<span> - </span>",L.innerHTML="<span> - </span>",h.innerHTML="<span> - </span>",H.innerHTML=`<span>${a}</span>`,y.innerHTML=`<span>${s.value[0].value}</span>`,L.innerHTML=`<span>${e.value[0].value}</span>`,h.innerHTML=`<span>${o.value[0].value}</span>`}async function W(t){const n=t?.target?.id;await w(n)}async function F(t){if(t.key==="Enter"){const n=t?.target?.id;await w(n)}}async function G(){r=(await A()).station;async function n(s){let e=-1,o=NaN;for(let i=0;i<r.length;i++){const q=r[i].latitude,D=r[i].longitude,E=q-s.coords.latitude,N=D-s.coords.longitude,S=Math.sqrt(E**2+N**2);(S<e||e===-1)&&(e=S,o=i)}await w(o)}function a(){navigator.geolocation?(navigator.geolocation.getCurrentPosition(n),u.classList.add("display-none")):C.innerHTML="Ingen position hittad"}M?.addEventListener("click",a),M?.addEventListener("keypress",a)}await G();function K(){r&&(v.innerHTML="",l=r.filter(t=>t.name.toLowerCase().includes(d.value.toLowerCase())));for(let t=0;t<5;t++)if(l[t]){const n=document.createElement("li");n.setAttribute("tabindex","3"),n.id=String([t]);const a=document.createTextNode(l[t].name);n.appendChild(a),v.appendChild(n),n?.addEventListener("click",W),n?.addEventListener("keypress",F)}}d?.addEventListener("input",K);const c=new Date;c.getMonth()===11||c.getMonth()<=1?(p.classList.add("winter-img"),m.classList.add("winter-decoration-img")):c.getMonth()===2||c.getMonth()<=4?(p.classList.add("spring-img"),m.classList.add("spring-decoration-img")):c.getMonth()===5||c.getMonth()<=7?(p.classList.add("summer-img"),m.classList.add("summer-decoration-img")):(p.classList.add("fall-img"),m.classList.add("fall-decoration-img"));
